<!doctype html>
<html lang="en-US">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="preload" as="font" href="https://mmapudenar.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
<link rel="preload" as="font" href="https://mmapudenar.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2" type="font/woff2" crossorigin>
<link rel="preload" as="font" href="https://mmapudenar.github.io/fonts/KaTeX_Main-Regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://mmapudenar.github.io/fonts/KaTeX_Math-Italic.woff2" type="font/woff2" crossorigin>

  <link rel="stylesheet" href="https://mmapudenar.github.io/main.10ccb4eb6483819b06492195d9dc144f3bc7a0259df4445dac97619d3102edee925dea9fa2f929cfe8b83f644af0eff57a38a53f572b37d71ff06b0c11e2ce1a.css" integrity="sha512-EMy062SDgZsGSSGV2dwUTzvHoCWd9ERdrJdhnTEC7e6SXeqfovkpz&#43;i4P2RK8O/1ejilP1crN9cf8GsMEeLOGg==" crossorigin="anonymous">
<noscript><style>img.lazyload { display: none; }</style></noscript>
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <title>Sensor de Dirección y Velocidad del Viento | MMAP</title>
<meta name="description" content="Anemómetro.">
<link rel="canonical" href="https://mmapudenar.github.io/docs/ema/anemometro/">
<meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="/doks.png">
    <meta name="twitter:title" content="Sensor de Dirección y Velocidad del Viento">
<meta name="twitter:description" content="Anemómetro.">

<meta name="twitter:site" content="@henkverlinde">
<meta name="twitter:creator" content="@henkverlinde">

<meta property="og:title" content="Sensor de Dirección y Velocidad del Viento">
<meta property="og:description" content="Anemómetro.">
<meta property="og:type" content="article">
<meta property="og:url" content="/docs/ema/anemometro/">

  <meta property="og:image" content="/doks.png"/>
    <meta property="article:published_time" content="2020-10-06T08:49:31+00:00">
  <meta property="article:modified_time" content="2020-10-06T08:49:31+00:00">
  <meta property="og:site_name" content="MMAP">

<meta property="article:publisher" content="https://www.facebook.com/verlinde.henk">
<meta property="article:author" content="https://www.facebook.com/verlinde.henk">
<meta property="og:locale" content="en_US">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "name": "Home",
        "item": "https:\/\/mmapudenar.github.io\/"
    },{
        "@type": "ListItem",
        "position":  3 ,
        "name": "Docs",
        "item": "https:\/\/mmapudenar.github.io\/\/docs\/"
    },{
        "@type": "ListItem",
        "position":  4 ,
        "name": "Ema",
        "item": "https:\/\/mmapudenar.github.io\/\/docs\/ema\/"
    },{
        "@type": "ListItem",
        "position":  5 ,
        "name": "Anemometro",
        "item": "https:\/\/mmapudenar.github.io\/\/docs\/ema\/anemometro\/"
    }]
}
</script>

  <meta name="theme-color" content="#fff">
<link rel="apple-touch-icon" sizes="180x180" href="https://mmapudenar.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://mmapudenar.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://mmapudenar.github.io/favicon-16x16.png">
<link rel="manifest" href="https://mmapudenar.github.io/site.webmanifest">
  
</head>
  <body class="docs single">
    <div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
  <div class="container">
    <input class="menu-btn order-0" type="checkbox" id="menu-btn">
    <label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
    <a class="navbar-brand order-1 order-md-0 me-auto" href="https://mmapudenar.github.io/">MMAP</a>
    <button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
      <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
      <span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
    </button>
    <ul class="navbar-nav social-nav order-3 order-md-5">
      <li class="nav-item">
          <a class="nav-link" href="https://github.com/MMAPudenar"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
        </li>
      </ul>
    <div class="collapse navbar-collapse order-4 order-md-1">
      <ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item">
            <a class="nav-link" href="https://mmapudenar.github.io/docs/intro/mmap/">Documentación</a>
          </li>
        <li class="nav-item">
            <a class="nav-link" href="http://grafana.mmapudenar.me/">Grafana</a>
          </li>
        <li class="nav-item">
            <a class="nav-link" href="http://influxdb.mmapudenar.me/">InfluxDB</a>
          </li>
        <li class="nav-item">
            <a class="nav-link" href="http://nodered.mmapudenar.me/">NodeRED</a>
          </li>
        </ul>
      <div class="break order-6 d-md-none"></div>
      <form class="navbar-form flex-grow-1 order-7 order-md-3">
        <input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..." aria-label="Search docs..." autocomplete="off">
        <div id="suggestions" class="shadow bg-white rounded"></div>
      </form>
      </div>
  </div>
</header>
    <div class="wrap container" role="document">
      <div class="content">
        
	<div class="row flex-xl-nowrap">
		<div class="col-lg-5 col-xl-4 docs-sidebar">
			<nav class="docs-links" aria-label="Main navigation">
				<h3>Introducción</h3>
  <ul class="list-unstyled">
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/intro/mmap/">Sistema MMAP</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/intro/equipo/">Equipo de Trabajo</a></li>
    </ul>
  <h3>Modelo de Predicción</h3>
  <ul class="list-unstyled">
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/modelo/indice/">Contenido de Sección Modelo Predicción</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/modelo/filt/">Preprocesamiento de Datos</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/modelo/correlacion/">Correlación entre bases de datos</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/modelo/site-adaptation/">Site-adaptation</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/modelo/modelo/">Modelo de Predicción</a></li>
    </ul>
  <h3>Plataforma de Monitoreo</h3>
  <ul class="list-unstyled">
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/plat/indice/">Contenido de Sección Plataforma Web</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/plat/nodered/">Distribución de Datos</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/plat/influx/">Almacenamiento de Datos</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/plat/grafana/">Visualización de Datos</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/plat/bloques/">Diagrama de Funcionamiento</a></li>
    </ul>
  <h3>Estación Meteorológica</h3>
  <ul class="list-unstyled">
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/indice/">Contenido de sección E.M.A.</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/hardware/">Hardware</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/micro/">Microcontrolador</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/piranometro/">Sensor de Radiación Solar</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/sht/">Sensor de Temperatura y Humedad</a></li>
    <li><a class="docs-link active" href="https://mmapudenar.github.io/docs/ema/anemometro/">Sensor de Dirección y Velocidad del Viento</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/circuito/">Circuito Electrónico</a></li>
    <li><a class="docs-link" href="https://mmapudenar.github.io/docs/ema/estructura/">Estructura</a></li>
    </ul>
  
			</nav>
		</div>
		<nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
			<div class="page-links">
    <h3>On this page</h3>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#anemómetro-davis-6410">Anemómetro DAVIS 6410</a>
      <ul>
        <li><a href="#características-técnicas">Características técnicas</a></li>
        <li><a href="#montaje">Montaje</a></li>
        <li><a href="#circuito-interno">Circuito interno</a></li>
        <li><a href="#conexión">Conexión</a></li>
        <li><a href="#medición-dirección-del-viento">Medición Dirección del Viento</a></li>
        <li><a href="#medición-velocidad-del-viento">Medición Velocidad del Viento</a></li>
        <li><a href="#código-de-programación">Código de Programación</a></li>
      </ul>
    </li>
    <li><a href="#referencias">Referencias</a></li>
  </ul>
</nav>
  </div>

		</nav>
		<main class="docs-content col-lg-11 col-xl-9">
		
			<h1>Sensor de Dirección y Velocidad del Viento</h1>
			<p class="lead">Anemómetro.</p>
			<h2 id="anemómetro-davis-6410">Anemómetro DAVIS 6410<a href="#anemómetro-davis-6410" class="anchor" aria-hidden="true">#</a> </h2>
<p>El anemómetro Davis 6410 está diseñado para medir tanto la velocidad como la dirección del viento. El sensor de velocidad del viento utiliza un interruptor de láminas magnético que se activa una vez por cada revolución de las copas de viento. La dirección del viento se mide mediante un potenciómetro.</p>
<p align="center">
  <img alt="img-name" src="https://i.imgur.com/3zNuJXo.png" width="400">
  <br>
    <em><b>Fig. 1.</b> Anemómetro</em>
</p>
<h3 id="características-técnicas">Características técnicas<a href="#características-técnicas" class="anchor" aria-hidden="true">#</a> </h3>
<p>Las especificaciones del anemómetro se dan en la siguiente Tabla</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td>Voltaje de operación</td>
<td>3.3 ~ 5 VDC</td>
</tr>
<tr>
<td>Rango de Medición</td>
<td>Velocidad: [0.5, 89] m/s<br>Dirección: [0, 360] °</td>
</tr>
<tr>
<td>Exactitud</td>
<td>Velocidad: $\pm$1 m/s<br>Dirección: $\pm$7°</td>
</tr>
<tr>
<td>Resolución</td>
<td>Velocidad: $\pm$0.1 m/s<br>Dirección: $\pm$1°</td>
</tr>
</tbody>
</table>
<h3 id="montaje">Montaje<a href="#montaje" class="anchor" aria-hidden="true">#</a> </h3>
<h3 id="circuito-interno">Circuito interno<a href="#circuito-interno" class="anchor" aria-hidden="true">#</a> </h3>
<p>En la Figura 2 se diagrama el circuito interno del anemómetro. La veleta tiene un potenciómetro lineal de 20k conectado, del cual sale una medida analógica. Por su parte las copas de viento tienen un <em>reed-switch</em> o interruptor magnético de láminas montado en su interior cerca del eje. Este interruptor se activa una vez por cada revolución de las copas.</p>
<p align="center">
  <img alt="img-name" src="https://i.imgur.com/qYXARcT.jpg" width="450">
  <br>
    <em><b>Fig. 2.</b> Circuito interno del Anemómetro</em>
</p>
<h3 id="conexión">Conexión<a href="#conexión" class="anchor" aria-hidden="true">#</a> </h3>
<p>El anemómetro cuenta con un conector RJ11 de 6 pines 4 conectores, en los cuales se encuentra la alimentación del sensor y las señales de salida de dirección y velocidad del viento.</p>
<table>
<thead>
<tr>
<th>Número de Conector</th>
<th>Color</th>
<th>Conexión</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>-</td>
<td>NC</td>
</tr>
<tr>
<td>2</td>
<td>Amarillo</td>
<td>VCC</td>
</tr>
<tr>
<td>3</td>
<td>Verde</td>
<td>Dirección Viento</td>
</tr>
<tr>
<td>4</td>
<td>Rojo</td>
<td>GND</td>
</tr>
<tr>
<td>5</td>
<td>Negro</td>
<td>Velocidad Viento</td>
</tr>
<tr>
<td>6</td>
<td>-</td>
<td>NC</td>
</tr>
</tbody>
</table>
<h3 id="medición-dirección-del-viento">Medición Dirección del Viento<a href="#medición-dirección-del-viento" class="anchor" aria-hidden="true">#</a> </h3>
<p>El circuito de dirección del viento se conecta a un pin analógico.</p>
<p>El ESP32 tiene un ADC de 12 bits por lo que al mover la veleta se obtiene lectura entre 0 y 4095, lo cual corresponde a una tensión de 0 y 3.3V. Para obtener la dirección del viento se debe convertir en el software el rango [0, 4095] a un rango de [0, 360] .</p>
<p>El potenciómetro de la veleta tiene una zona muerta que dará como resultado el valor 0 en el pin analógico. La veleta está calibrada de fábrica para ser 0 cuando la veleta está alineada con la barra de soporte apuntando hacia fuera del soporte de montaje. Esto se muestra en el diagrama de la Figura 3.</p>
<p align="center">
  <img alt="img-name" src="https://i.imgur.com/QN2Mvz8.png" width="450">
  <br>
    <em><b>Fig. 3.</b> Medición Dirección del Viento</em>
</p>
<h3 id="medición-velocidad-del-viento">Medición Velocidad del Viento<a href="#medición-velocidad-del-viento" class="anchor" aria-hidden="true">#</a> </h3>
<p>El circuito de velocidad del viento se conecta a un pin digital, donde se utiliza el pulso enviado por el switch magnético para detectar cada vez que las copas de viento realizan una revolución. En esta conexión se utiliza una resistencia pullup. Esta resistencia llevará el pin digital a VCC cuando el interruptor esté abierto, si no se conecta el voltaje del circuito podría causar falsos disparos en la entrada.</p>
<p>Según el documento técnico del anemómetro, 1600 revoluciones por hora equivalen a 1 milla por hora <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. Para calcular la velocidad del viento se convierte el número de veces que se activa el interruptor por periodo de tiempo aplicando la siguiente fórmula</p>
<p>$V = P(\frac{2,25}{T})$</p>
<p>donde $V$ es la velocidad en millas por hora, $P$ es el número de pulsos por periodo de muestreo, y $T$ es el periodo de muestreo en segundos.</p>
<h3 id="código-de-programación">Código de Programación<a href="#código-de-programación" class="anchor" aria-hidden="true">#</a> </h3>
<p>Teniendo en cuenta el Datasheet del anemómetro <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> se desarrolla una biblioteca que permite obtener la lectura de la velocidad y dirección del viento. Debido a la naturaleza aleatoria de las activaciones del switch de velocidad del viento, se utiliza una interrupción por hardware en el pin de entrada digital que genera una interrupción en el flanco descendente del pulso. La rutina de servicio de interrupción (ISR) que se ejecuta en la interrupción incrementa un contador.</p>
<p>La biblioteca esta disponible en <a href="https://github.com/MMAPudenar/Davis">GitHub</a>. Se compone de un archivo de cabecera <code>davis6410.hpp</code> y un archivo de implementación <code>davis6410.cpp</code> donde se encuentran las operaciones y comandos necesarios para la conversión del valor analógico en una dato de radiación global.</p>
<p>A continuación se presenta un código de ejemplo para la medición con el anemómetro Davis 6410.</p>
<script src="https://gist.github.com/JoePortilla/070e6c2c244128fbf2f72645db845e17.js"></script>
<h2 id="referencias">Referencias<a href="#referencias" class="anchor" aria-hidden="true">#</a> </h2>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>d&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

			<div class="docs-navigation d-flex justify-content-between">
	
	<a href="https://mmapudenar.github.io/docs/ema/sht/">
			<div class="card my-1">
				<div class="card-body py-2">
					&larr; Sensor de Temperatura y Humedad
				</div>
			</div>
		</a>
	<a class="ms-auto" href="https://mmapudenar.github.io/docs/ema/circuito/">
			<div class="card my-1">
				<div class="card-body py-2">
					Circuito Electrónico &rarr;
				</div>
			</div>
		</a>
	</div>

		</main>
	</div>

      </div>
    </div>
    
    
    <footer class="footer text-muted">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 order-last order-lg-first">
        <ul class="list-inline">
          <li class="list-inline-item">Desarrollado con <a href="https://www.github.com/">GitHub</a>, <a href="https://gohugo.io/">Hugo</a>, y <a href="https://getdoks.org/">Doks</a></li>
        </ul>
      </div>
      <div class="col-lg-8 order-first order-lg-last text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item"><a href="http://www.udenar.edu.co/">Universidad de Nariño</a></li>
          </ul>
      </div>
    </div>
  </div>
</footer>
    
    <script src="https://mmapudenar.github.io/js/highlight.min.222f188ed4dd5b9b382bf5f4cd3c70c14ace6e4d4f0975e95baff2fe228e08800dd3ac74001a20ac30a4426fa4f2c25bccf66a8b89151126992f109429935607.js" integrity="sha512-Ii8YjtTdW5s4K/X0zTxwwUrObk1PCXXpW6/y/iKOCIAN06x0ABogrDCkQm&#43;k8sJbzPZqi4kVESaZLxCUKZNWBw==" crossorigin="anonymous" defer></script>
  <script src="https://mmapudenar.github.io/js/vendor/katex/dist/katex.min.a16c5ca92b3cba474a697a3146ca2ed1486305bf2f452dc16a5c8701fcc524d72779ba521ef7f61212fc43a2eedb2a94598e948b0c7f2a510f6ac88e7edafdd0.js" integrity="sha512-oWxcqSs8ukdKaXoxRsou0UhjBb8vRS3BalyHAfzFJNcnebpSHvf2EhL8Q6Lu2yqUWY6Uiwx/KlEPasiOftr90A==" crossorigin="anonymous" defer></script>
    <script src="https://mmapudenar.github.io/js/vendor/katex/dist/contrib/auto-render.min.b367aaf20f22663f79cc66de5558d99f3392981b198f21229e9f6acedb41defe9d682a88b1a1eefddf271fb7260bc5b58c55c0a24779e5358b3c51392dd34d56.js" integrity="sha512-s2eq8g8iZj95zGbeVVjZnzOSmBsZjyEinp9qzttB3v6daCqIsaHu/d8nH7cmC8W1jFXAokd55TWLPFE5LdNNVg==" crossorigin="anonymous" defer></script>
  <script src="https://mmapudenar.github.io/main.min.7ebe89441904dda7661149e63fbe43501464a92ff46162cca013d200684516a1deb1dbc83f0780f78a4ab78f74be173e33f174a8518d1eb2f692b09564723789.js" integrity="sha512-fr6JRBkE3admEUnmP75DUBRkqS/0YWLMoBPSAGhFFqHesdvIPweA94pKt490vhc&#43;M/F0qFGNHrL2krCVZHI3iQ==" crossorigin="anonymous" defer></script>
  <script src="https://mmapudenar.github.io/index.min.93359410660700eb7f12c6d828f4e16b620c16a277e3233d108b0e095996b09cd4c61bb7b17b9b2eb41d52788acc91f0f8c446670ca4b4168b8a9c5705b18c1d.js" integrity="sha512-kzWUEGYHAOt/EsbYKPTha2IMFqJ34yM9EIsOCVmWsJzUxhu3sXubLrQdUniKzJHw&#43;MRGZwyktBaLipxXBbGMHQ==" crossorigin="anonymous" defer></script>
  
  </body>
</html>